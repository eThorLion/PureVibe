<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PureVibe</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="homePage.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <%- include ('navbar') %>
    <img src="bg.png" alt="background" id="background">
    
    <div style="height: 100%" class="row container-fluid">
        <!-- Posts Section - col-10 -->
        <div class="col-10 posts-container" style="height: 100%; overflow-y: auto; padding: 20px;">
            <div id="posts-feed">
                <% if (posts && posts.length > 0) { %>
                    <% posts.forEach(function(post) { %>
                        <div class="post-card">
                            <div class="post-header">
                                <div class="post-author">
                                    <img class="author-avatar" src="profile.png" alt="profile">
                                    <div class="author-info">
                                        <h3 class="author-name"><%= post.author %></h3>
                                        <p class="post-date"><%= new Date(post.createdAt).toLocaleDateString('he-IL') %></p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="post-content">
                                <% if (post.description) { %>
                                    <p class="post-description"><%= post.description %></p>
                                <% } %>
                                <% if (post.image) { %>
                                    <div class="post-image-container">
                                        <img class="post-image" src="/image/<%= post._id %>" alt="Post image">
                                    </div>
                                <% } %>
                            </div>
                            
                            <div class="post-actions">
                                <button class="action-btn like-btn">❤️ אהבתי</button>
                                <button class="action-btn comment-btn">💬 תגובה</button>
                                <button class="action-btn share-btn">📤 שיתוף</button>
                            </div>
                        </div>
                    <% }) %>
                <% } else { %>
                    <div class="no-posts">
                        <h2>There is no posts yet</h2>
                        <p>Be the first to upload!</p>
                        <a class="upload-link">Upload new post</a>
                    </div>
                <% } %>
            </div>
        </div>

        <!-- Contacts Sidebar - col-2 -->
        <div id="contacts" class="col-2" style="height: 90%;">
            <h1 id="head-contacts">Contacts:</h1>
            <div id="suggestions">
                <div class="profile">
                    <img class="profiles" src="profile.png" alt="profile">
                    <div class="contact">
                        <h1 class="names">Name</h1>
                        <button class="add">+ Add Friend</button>
                    </div>
                </div>
                <div class="profile">
                    <img class="profiles" src="profile.png" alt="profile">
                    <div class="contact">
                        <h1 class="names">Name</h1>
                        <button class="add">+ Add Friend</button>
                    </div>
                </div>
                <div class="profile">
                    <img class="profiles" src="profile.png" alt="profile">
                    <div class="contact">
                        <h1 class="names">Name</h1>
                        <button class="add">+ Add Friend</button>
                    </div>
                </div>
                <div class="profile">
                    <img class="profiles" src="profile.png" alt="profile">
                    <div class="contact">
                        <h1 class="names">Name</h1>
                        <button class="add">+ Add Friend</button>
                    </div>
                </div>
                <div class="profile">
                    <img class="profiles" src="profile.png" alt="profile">
                    <div class="contact">
                        <h1 class="names">Name</h1>
                        <button class="add">+ Add Friend</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

  <div id="popup" class="popup">
    <h2>העלאת פוסט חדש</h2>
    <form action="/posts" method="POST" enctype="multipart/form-data">
      <div class="form-group">
        <label>תמונה:</label>
        <input type="file" name="image" accept="image/*" required>
      </div>

      <div class="form-group">
        <label>תיאור:</label>
        <textarea name="description" placeholder="כתבו כאן את התיאור שלכם..." required></textarea>
      </div>

      <div class="form-group" style="display: none;">
        <input value="<%-name%>" type="text" name="author" placeholder="שם היוצר" required>
      </div>

      <div class="form-group">
        <button type="submit">שמור פוסט</button>
      </div>
    </form>
      <div style="position: absolute; z-index: 1; width: 100vw; height: 100vh; background-color: black; opacity: 0.5; left: 0; top: 0; right: 0;
  bottom: 0;"></div>
  </div>
  <button class="floating-btn" id="floatingBtn" onclick="openPopup()">
    +
  </button>



    <script>

        function openPopup() {
        const popup = document.getElementById('popup');
        if (popup) {
            popup.classList.remove('hide');
        } else {
        // אם אין פופאפ, אפשר להוסיף פעולה אחרת
        alert('הוסף פוסט חדש!');
        }
    }

        // Add Friend buttons functionality
        const buttons = document.getElementsByClassName("add");
        for (let btn of buttons) {
            btn.onclick = function () {
                btn.innerHTML = "Friend Added!";
                btn.disabled = true;
                btn.style.backgroundColor = "#6c757d";
                btn.style.color = "white";
            };
        }

        // Post interactions
        document.addEventListener('DOMContentLoaded', function() {
            // Like buttons
            const likeButtons = document.querySelectorAll('.like-btn');
            likeButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.classList.contains('liked')) {
                        this.innerHTML = '❤️ אהבתי';
                        this.classList.remove('liked');
                    } else {
                        this.innerHTML = '❤️ אהבת';
                        this.classList.add('liked');
                    }
                });
            });

            // Comment buttons
            const commentButtons = document.querySelectorAll('.comment-btn');
            commentButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    alert('פונקציית תגובות תיהיה זמינה בקרוב!');
                });
            });

            // Share buttons
            const shareButtons = document.querySelectorAll('.share-btn');
            shareButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    alert('פונקציית שיתוף תיהיה זמינה בקרוב!');
                });
            });
        });

        // Popup functionality
        const popup = document.getElementById('popup');
        popup.classList.add('hide');

    </script>

</body>
</html>